!function(){"use strict";var e,t,n,r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}function u(e){var n=l(e.name);if(!n)return{matched:!1};var r=n.filters;if(n.type===t.Group){var i=d(n.data.group);if(!function(e){if(!e.length)return console.warn("触发器组为空，请检查触发器配置!"),!1;var t=e[0].type,n=e.every((function(e){return e.type===t}));return n?!!n&&t:(console.warn("触发器组内的类型不一致，请检查触发器配置!"),!1)}(i)||!i.length)return{matched:!1};r=i.reduce((function(e,t){return t.filters&&e.push.apply(e,a([],o(t.filters))),e}),[]),n=i[0]}return{matched:c(r),trigger:n}}function c(e){return!e||!e.length||e.every((function(e){return function(e){var t=r(r({},window.stm.internalVariables),window.stm.customVariables),i=e.type,o=e.key,a=e.not,u=void 0!==a&&a,c=e.caseSensitive,d=void 0===c||c,l=String(e.value);if(!t[o])return!1;var f=u,s=String(t[o]);return d||(s=s.toLowerCase(),l=l.toLowerCase()),i===n.Contain&&(f=s.includes(l)),i===n.Equal&&(f=s===l),i===n.Regex&&(f=new RegExp(l).test(s)),u?!f:f}(e)}))}function d(e){return e.reduce((function(e,n){var r=l(n.name);if(!r)return e;if(r.type===t.Group){var i=d(r.data.group);e.push.apply(e,a([],o(i)))}return e.push(r),e}),[])}function l(e){var t=window.stm.config.triggers.triggers.find((function(t){return t.name===e}));return t||console.warn("找不到 "+e+" 对应的触发器，请检查配置!"),t}Object.create,Object.create,function(e){e.Const="Const"}(e||(e={})),function(e){e.PageView="PageView",e.DocumentEvent="DocumentEvent",e.Group="Group"}(t||(t={})),function(e){e.Contain="Contain",e.Equal="Equal",e.Regex="Regex"}(n||(n={}));var f={};function s(e,t){void 0===t&&(t={});var n=t.async,r=void 0!==n&&n,i=t.defer,o=void 0!==i&&i,a=t.head,u=void 0!==a&&a,c=e.name,d=e.scripts,l=e.scriptContent;if(!f[c]){if(d&&d.length>0)d.forEach((function(e){if(u)document.write('<script src="'+e+'"><\/script>');else if(document.body){var t=document.createElement("script");t.setAttribute("data-from-stm","1"),t.src=e,t.async=r,t.defer=o,document.body.appendChild(t)}}));else if(l)if(u)document.write("<script>"+l+"<\/script>");else if(document.body){var s=document.createElement("script");s.setAttribute("data-from-stm","1"),s.innerHTML=l,document.body.appendChild(s)}f[c]=!0,window.stm.loaded||(window.stm.loaded=[]),window.stm.loaded.push(e)}}window.stm&&(function(){var e,t,n=(window.stm.config.variables||{}).variables,o=void 0===n?[]:n,a=function(){var e=window.location,t=e.host,n=e.href,i=e.pathname;return r(r({},window.stm.lizardViewVariables),{pageURL:n,pageHost:t,pagePath:i,userAgent:window.navigator.userAgent})}(),u=o.filter((function(e){return!!e.isBuiltIn})).map((function(e){return e.name})),c={};try{for(var d=i(u),l=d.next();!l.done;l=d.next()){var f=l.value;c[f]=a[f]}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}window.stm.internalVariables=c}(),function(){var t,n,r=(window.stm.config.variables||{}).variables,o=(void 0===r?[]:r).filter((function(e){return!e.isBuiltIn})),a={};try{for(var u=i(o),c=u.next();!c.done;c=u.next()){var d=c.value,l=d.name,f=d.data;f.type===e.Const&&(a[l]=f.value)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}window.stm.customVariables=a}(),window.stm.config.tags.tags.forEach((function(e){var n=e.triggers,i=void 0===n?[]:n,o=e.head,a=void 0!==o&&o,c=e.data,d=void 0===c?{}:c;i.forEach((function(n){if(n){var i=u(n);if(i.matched)if(a)s(e,r(r({},d),{head:!0}));else{var o=i.trigger;if(o.type===t.DocumentEvent){var c=o,l=c.data,f=c.event,v=function(e){setTimeout(e,1e3)};window[f.element].addEventListener?window[f.element].addEventListener(f.name,v(s.bind(window,e,l))):window[l.element].attachEvent?window[l.element].attachEvent("on"+l.event,v(s.bind(window,e,l))):window[l.element]["on"+l.event]=v(s.bind(window,e,l))}o.type===t.PageView&&(l=o.data,s(e,r({},l)))}}}))})))}();